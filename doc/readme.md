<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# TruthOrDare

```go
import "github.com/2Friendly4You/TruthOrDare"
```

Package main provides a REST API server for managing truth or dare questions.

## Index

- [type Database](<#Database>)
  - [func NewDatabase\(\) \(\*Database, error\)](<#NewDatabase>)
  - [func \(d \*Database\) AddQuestion\(q Question\) error](<#Database.AddQuestion>)
  - [func \(d \*Database\) Close\(\) error](<#Database.Close>)
  - [func \(d \*Database\) GetQuestions\(language, qType string, tags \[\]string, config \*QueryConfig\) \(\[\]Question, error\)](<#Database.GetQuestions>)
  - [func \(d \*Database\) GetTags\(\) \(\[\]string, error\)](<#Database.GetTags>)
- [type QueryConfig](<#QueryConfig>)
- [type Question](<#Question>)


<a name="Database"></a>
## type Database

Database represents a connection to the MySQL database and provides methods for querying and manipulating truth or dare questions.

```go
type Database struct {
    // contains filtered or unexported fields
}
```

<a name="NewDatabase"></a>
### func NewDatabase

```go
func NewDatabase() (*Database, error)
```

NewDatabase creates a new database connection using environment variables and returns a Database instance. It attempts to connect up to 10 times with a 5\-second delay between attempts.

Required environment variables:

- MYSQL\_USER: Database username
- MYSQL\_PASSWORD: Database password
- MYSQL\_HOST: Database host address
- MYSQL\_PORT: Database port
- MYSQL\_DATABASE: Database name

Returns:

- \(\*Database, nil\) on successful connection
- \(nil, error\) if connection fails after 10 attempts

<a name="Database.AddQuestion"></a>
### func \(\*Database\) AddQuestion

```go
func (d *Database) AddQuestion(q Question) error
```

AddQuestion adds a new question to the database along with its tags. If any of the specified tags don't exist, they will be created automatically. The operation is performed in a transaction to ensure data consistency.

Parameters:

- q: Question struct containing:
- Language: Language code \(required\)
- Type: "truth" or "dare" \(required\)
- Task: The actual question/dare text \(required\)
- Tags: Array of tag names \(optional\)

Example:

```
err := db.AddQuestion(Question{
    Language: "en",
    Type:    "truth",
    Task:    "What's your biggest fear?",
    Tags:    []string{"deep", "emotional"},
})
```

Returns:

- nil on success
- error if the operation fails \(transaction will be rolled back\)

<a name="Database.Close"></a>
### func \(\*Database\) Close

```go
func (d *Database) Close() error
```

Close closes the database connection. It should be deferred after creating a new Database instance.

<a name="Database.GetQuestions"></a>
### func \(\*Database\) GetQuestions

```go
func (d *Database) GetQuestions(language, qType string, tags []string, config *QueryConfig) ([]Question, error)
```

GetQuestions retrieves questions from the database based on specified filters.

Parameters:

- language: Filter by language code \(e.g., "en", "de"\). Empty string matches all languages
- qType: Filter by question type \("truth" or "dare"\). Empty string matches all types
- tags: Array of tag names to filter by. Empty array matches all tags
- config: Query configuration options. If nil, defaults to matching any tag

Examples:

```
// Get all English questions
db.GetQuestions("en", "", nil, nil)

// Get German truth questions with either "18+" or "food" tags
db.GetQuestions("de", "truth", []string{"18+", "food"}, &QueryConfig{MatchAllTags: false})

// Get questions that have both "18+" AND "alcohol" tags
db.GetQuestions("", "", []string{"18+", "alcohol"}, &QueryConfig{MatchAllTags: true})
```

Returns:

- \(\[\]Question, nil\) on success
- \(nil, error\) if the query fails

<a name="Database.GetTags"></a>
### func \(\*Database\) GetTags

```go
func (d *Database) GetTags() ([]string, error)
```

GetTags returns all available tags in the database.

Returns:

- \(\[\]string, nil\) containing all tag names on success
- \(nil, error\) if the query fails

<a name="QueryConfig"></a>
## type QueryConfig

QueryConfig contains configuration options for database queries.

```go
type QueryConfig struct {
    // MatchAllTags determines whether all specified tags must match (true)
    // or if matching any tag is sufficient (false)
    MatchAllTags bool
}
```

<a name="Question"></a>
## type Question

Question represents a truth or dare question with its associated metadata.

```go
type Question struct {
    // ID is the unique identifier for the question
    ID  int `json:"id"`

    // Language is the ISO language code (e.g., "en", "de")
    Language string `json:"language"`

    // Type must be either "truth" or "dare"
    Type string `json:"type"`

    // Task contains the actual question or dare text
    Task string `json:"task"`

    // Tags is an array of associated tag names
    Tags []string `json:"tags"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
